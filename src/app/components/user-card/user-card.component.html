<div class="user-card" [class]="'user-card-' + variant">
  
  <!-- Card header -->
  <div class="user-card-header">
    <div class="user-avatar">
      <div class="avatar-placeholder">
        {{ (user?.name || 'U').charAt(0).toUpperCase() }}
      </div>
      
      @if (showStatus) {
        <div class="user-status" [class]="'status-' + user?.status">
          <span class="status-dot"></span>
        </div>
      }
    </div>
    
    <div class="user-info">
      <h3 class="user-name">{{ user?.name || 'Usuario' }}</h3>
      @if (user?.role) {
        <p class="user-role">{{ user.role }}</p>
      }
      @if (user?.email && showEmail) {
        <p class="user-email">{{ user.email }}</p>
      }
    </div>
    
    @if (showActions) {
      <div class="user-actions">
      <button 
        class="action-btn"
        (click)="onMessage()"
        title="Enviar mensaje">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4 17.17V4H20V16Z" fill="currentColor"/>
        </svg>
      </button>
      
      <button 
        class="action-btn"
        (click)="onCall()"
        title="Llamar">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M6.62 10.79C8.06 13.62 10.38 15.94 13.21 17.38L15.41 15.18C15.69 14.9 16.08 14.82 16.43 14.93C17.55 15.3 18.75 15.5 20 15.5C20.55 15.5 21 15.95 21 16.5V20C21 20.55 20.55 21 20 21C10.61 21 3 13.39 3 4C3 3.45 3.45 3 4 3H7.5C8.05 3 8.5 3.45 8.5 4C8.5 5.25 8.7 6.45 9.07 7.57C9.18 7.92 9.1 8.31 8.82 8.59L6.62 10.79Z" fill="currentColor"/>
        </svg>
      </button>
      
      <button 
        class="action-btn action-more"
        (click)="onMore()"
        title="MÃ¡s opciones">
        <svg width="16" height="16" viewBox="0 0 24 24">
          <path d="M12 8C13.1 8 14 7.1 14 6S13.1 4 12 4 10 4.9 10 6 10.9 8 12 8ZM12 10C10.9 10 10 10.9 10 12S10.9 14 12 14 14 13.1 14 12 13.1 10 12 10ZM12 16C10.9 16 10 16.9 10 18S10.9 20 12 20 14 19.1 14 18 13.1 16 12 16Z" fill="currentColor"/>
        </svg>
      </button>
      </div>
    }
  </div>
  
  <!-- Card body -->
  @if (user?.bio || user?.location || user?.company) {
    <div class="user-card-body">
      @if (user?.bio) {
        <p class="user-bio">{{ user.bio }}</p>
      }
    
    <div class="user-details">
      @if (user?.location) {
        <div class="user-detail">
          <svg class="detail-icon" width="14" height="14" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22S19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9S10.62 6.5 12 6.5 14.5 7.62 14.5 9 13.38 11.5 12 11.5Z" fill="currentColor"/>
          </svg>
          <span>{{ user.location }}</span>
        </div>
      }
      
      @if (user?.company) {
        <div class="user-detail">
          <svg class="detail-icon" width="14" height="14" viewBox="0 0 24 24">
            <path d="M12 7V3H2V21H22V7H12ZM6 19H4V17H6V19ZM6 15H4V13H6V15ZM6 11H4V9H6V11ZM6 7H4V5H6V7ZM10 19H8V17H10V19ZM10 15H8V13H10V15ZM10 11H8V9H10V11ZM10 7H8V5H10V7ZM20 19H12V17H14V15H12V13H14V11H12V9H20V19ZM18 11H16V13H18V11ZM18 15H16V17H18V15Z" fill="currentColor"/>
          </svg>
          <span>{{ user.company }}</span>
        </div>
      }
      
      @if (user?.joinDate) {
        <div class="user-detail">
          <svg class="detail-icon" width="14" height="14" viewBox="0 0 24 24">
            <path d="M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3.01 3.9 3.01 5L3 19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19ZM7 10H12V15H7V10Z" fill="currentColor"/>
          </svg>
          <span>Desde {{ user.joinDate | date:'MMM yyyy' }}</span>
        </div>
      }
    </div>
  </div>
  }
  
  <!-- Card stats -->
  @if (showStats && user?.stats) {
    <div class="user-card-stats">
      @for (stat of user.stats; track stat.id || $index) {
        <div class="stat-item">
          <span class="stat-value">{{ stat.value }}</span>
          <span class="stat-label">{{ stat.label }}</span>
        </div>
      }
    </div>
  }
  
  <!-- Card footer -->
  @if (showFollowButton || user?.tags?.length) {
    <div class="user-card-footer">
      @if (user?.tags?.length) {
        <div class="user-tags">
          @for (tag of user.tags.slice(0, 3); track tag) {
            <span class="user-tag">
              {{ tag }}
            </span>
          }
          @if (user.tags.length > 3) {
            <span class="user-tag-more">
              +{{ user.tags.length - 3 }}
            </span>
          }
        </div>
      }
      
      @if (showFollowButton) {
        <button 
          class="follow-btn"
          [class.follow-btn-following]="isFollowing"
          (click)="onToggleFollow()">
          {{ isFollowing ? 'Siguiendo' : 'Seguir' }}
        </button>
      }
    </div>
  }
</div>